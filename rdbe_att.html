<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.15">
<meta name="author" content="E. Himwich, C. Ruszczyk, K. Imai, C. Coughlin, M. Poirier, A. Burns, E. Terrazas">
<title>DRAFT Method for setting attenuation for RDBEs</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:50%;border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="book">
<div id="header">
<h1>DRAFT Method for setting attenuation for RDBEs</h1>
<div class="details">
<span id="author" class="author">E. Himwich, C. Ruszczyk, K. Imai, C. Coughlin, M. Poirier, A. Burns, E. Terrazas</span><br>
<span id="revdate">Version 0.93 - October 2021</span>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">1. Introduction</a></li>
<li><a href="#_dealing_with_changes">2. Dealing with changes</a></li>
<li><a href="#_how_attenuations_interact">3. How attenuations interact</a></li>
<li><a href="#_method">4. Method</a></li>
<li><a href="#_updating_the_ifdbb_procedure_in_a_schedule_locally">5. Updating the ifdbb procedure in a schedule locally</a></li>
<li><a href="#_sending_an_updated_ifdbb_for_use_by_schedule_writers">6. Sending an updated ifdbb for use by schedule writers</a></li>
<li><a href="#_example_ifdbb_procedure">Appendix A: Example ifdbb procedure</a></li>
<li><a href="#_example_rdbe_atten_output">Appendix B: Example rdbe_atten= output</a></li>
<li><a href="#_new_ifdbb_script">Appendix C: new_ifdbb script</a></li>
<li><a href="#_example_diff_output_comparing_schedule_files">Appendix D: Example diff output comparing schedule files</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_introduction">1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <a href="#_method">Method</a> section below can be used to adjust the attenuation
settings depending on the observing mode. The observing mode usually
stays the same for a given experiment type. It is not currently
possible to change the mode in an experiment from the schedule file.
When that becomes possible, each mode can supply its own attenuator
settings. Additionally, please be aware that more than one experiment
type may use the same mode.</p>
</div>
<div class="paragraph">
<p>Before a new observing mode is used at a station for the first time,
the method given here can be used to adjust the attenuation and then
the Coordinating Center can be informed of the correct settings to use
in future schedules for that experiment type or observing mode. The
determined values can be used locally until the schedules received are
using them as the default.</p>
</div>
<div class="paragraph">
<p>If the method has not been attempted yet for some observing modes that
a station is already using, it should be performed for those modes and
the Coordinating Center informed of any changes that are needed.</p>
</div>
<div class="paragraph">
<p>If there are changes at a station, an update may be necessary. This
is described in the next section <a href="#_dealing_with_changes">Dealing with changes</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dealing_with_changes">2. Dealing with changes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Due to changes in the situation at a station, e.g., having a warm
receiver or a loss of signal chain gain, it may become necessary to
adjust the values. If not otherwise apparent, this may become evident
because the RDBE RMSs are not reaching the target value, typically
about <code>20</code>.</p>
</div>
<div class="paragraph">
<p>At that point, the method can be re-run or an appropriate <em>ad hoc</em>
change to the values can be used to correct the situation. As an
example of the latter approach, an increase in the overall signal
level of 10 dB might be compensated for by increasing the RFD and/or
UDC attenuations by a net total of 10 dB. Of course, if this is caused
by a failure of some component, the failure should be addressed as
soon as practical.</p>
</div>
<div class="paragraph">
<p>Once the level is corrected, it should be considered whether the issue
is likely to continue long enough for it to be worth sending new
values to the Coordinating Center or to just adjust the values locally
until the issue is resolved. If a change only affects one experiment,
it may not be worth sending the new values to the Coordinating Center.
Instead the change can just be made directly in the <code>ifdbb</code> procedure
for that experiment. That approach can be followed for some time, but
eventually it may be better to send an updated <code>ifdbb</code> procedure to
the Coordinating Center so it can be included in schedules
automatically rather than adjusting it each time at the station.</p>
</div>
<div class="paragraph">
<p>If a new <code>ifdbb</code> procedure is developed, it can be inserted into
schedules locally using the method in
<a href="#_updating_the_ifdbb_procedure_in_a_schedule_locally">Updating the ifdbb procedure in a schedule locally</a> section below.</p>
</div>
<div class="paragraph">
<p>If it is worth sending the updated version to the Coordinating Center,
the method in
<a href="#_sending_an_updated_ifdbb_for_use_by_schedule_writers">Sending an updated ifdbb for use by schedule writers</a> section below
can be used. This is appropriate for permanent or long lasting
changes, reducing the amount of manual work needed at the station.</p>
</div>
<div class="paragraph">
<p>If the attenuation settings are determined using the <a href="#_method">Method</a>
section below, resulting in RDBE attenuator values of 10-15 dB, the
system should be able to tolerate level changes of in a range of up to
about ±10 dB fairly well in the short-term, including weather.
However, it is recommended that this not be used as a band-aid for a
long-term problem.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_attenuations_interact">3. How attenuations interact</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The total attenuation for each IF signal is the sum of the RFD, UDC,
and RDBE attenuation in the signal path for that IF channel. For a
given signal level and RFD and UDC attenuation settings, the RDBE will
try to adjust its attenuation to reach the nominal RMS, usually <code>20</code>,
in each channel.</p>
</div>
<div class="paragraph">
<p>Suppose that has happened, i.e., the RMS has adjusted to <code>20</code>. Then
the total of the attenuation for that channel has reached the right
level to get <code>20</code> as the RMS level. Let&#8217;s say that the attenuations
are RFD: <code>20</code>, UDC: <code>15</code>, and RDBE: <code>15</code>. This gives a total
attenuation of <code>50</code> dB.</p>
</div>
<div class="paragraph">
<p>Now suppose that the UDC attenuation for that IF is increased by 5 dB.
To get an RMS of <code>20</code>, the RDBE will have to reduce its attenuation by
about the same amount. Now the attenuations would be about RFD: <code>20</code>,
UDC: <code>20</code>, and RDBE: <code>10</code>. The total is still 50 dB, but it is
distributed differently. This is also an example of the fact that the
RDBE attenuation changes in the opposite direction of the RFD plus UDC
attenuation. What is being held constant is the RMS of <code>20</code> (assuming
it is possible to get to <code>20</code>).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_method">4. Method</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The basic strategy is to adjust the RFD and UDC attenuators to get the
RDBE RMSs around <code>20</code>, working at zenith on a clear day. Then the
attenuator settings are further refined to get the RDBE attenuations
in the <code>10</code>-<code>15</code> dB range.</p>
</div>
<div class="paragraph">
<p>The description in this section provides a lot of detail to assist
users that are attempting this for the first time. More experienced
users may not need so much detail, but may still find it useful for
reference. To help illustrate what is involved, two appendices are
included, <a href="#_example_ifdbb_procedure">Example ifdbb procedure</a> and
<a href="#_example_rdbe_atten_output">Example rdbe_atten= output</a>.</p>
</div>
<div class="paragraph">
<p>All steps should be performed as <em>oper</em>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Point the antenna to zenith on a clear day (hopefully there is not a
lot of RFI).</p>
</li>
<li>
<p>In the FS, open a procedure library for an experiment of the type
that you want to make adjustments for, e.g. for a <code>vo</code> at <code>K2</code>:</p>
<div class="literalblock">
<div class="content">
<pre>proc=vo0202k2</pre>
</div>
</div>
</li>
<li>
<p>Using <em>pfmed</em>, make a copy of <code>ifdbb</code>, maybe <code>ifdt</code>. In <em>pfmed</em>:</p>
<div class="literalblock">
<div class="content">
<pre>st,ifdbb,ifdt
ex</pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
You <em>must</em> use <em>pfmed</em> to modify procedures to keep them in
sync with the FS. Help is available in <em>pfmed</em> with the <code>help</code>
command. Commands support tab-completion where it is useful.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Use <em>pfmed</em> to make changes to the attenuation settings in <code>ifdt</code>
for these steps:</p>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<div class="title">Caution</div>
</td>
<td class="content">
You must exit <em>pfmed</em> each time you make a change before
re-executing the procedure to test the effect. Use the <code>ex</code> commands
to exit <em>pfmed</em>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>You can use the <em>pfmed</em> <code>vi</code> command to edit the procedure with <em>vi</em>,
e.g., <code>vi,ifdt</code>. This will also work for <em>emacs</em> with <code>emacs,ifdt</code>. If
you would like to use a different editor you can specify it by setting
the <code>EDITOR</code> environment variable. For example to use <em>nano</em>, you can
use:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>export EDITOR=nano</pre>
</div>
</div>
<div class="paragraph">
<p>before you enter <em>pfmed</em> (this is only needed once per window, or text
terminal login, instance; it could be added to <em>~oper/.profile</em> for
use in future logins). Then use the <code>ed,ifdt</code> command inside <em>pfmed</em>
to edit the procedure with your specified editor.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Set all RFD attenuators to <code>10</code></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If you don&#8217;t have an RFD, set any attenuation before the RDBEs
appropriately. In this case, a good starting UDC attention might be
<code>20</code>. Use the value you choose in place of the <code>10</code> in the next step.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Set all UDC attenuators to <code>10</code></p>
</li>
<li>
<p>Iterate the following steps to get nominal RMSs of <code>20</code>:</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Check the RMS values for the current <code>ifdt</code> setup:</p>
<div class="literalblock">
<div class="content">
<pre>ifdt
rdbe_atten=</pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<code>help=rdbe_atten</code> will display a help page for <code>rdbe_atten</code>
command that explains what it does and its output.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>If the RMSs are too high, increase individual UDC attenuators to
get the RMSs closer to  <code>20</code> (if too low, decrease the UDC
attenuators).</p>
<div class="paragraph">
<p>If a UDC attenuator is near its maximum, <code>31.5</code>, increase the
corresponding RFD attenuator by <code>10</code> (or <code>5</code>) dB and try again (if the
UDC attenuation is near <code>0</code> decrease the RFD attenuation instead).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Adjusting the RFD attenuation may affect other channels. If this
happens to you, you may need to trim their UDC settings again. The
typical correspondence of RFD channels to UDCs/IFs is given in the
<a href="#rfdchannels">RFD Channels</a> table. This table can be used to
determine which IFs are affected by which RFD and UDC channels.</p>
</div>
<table id="rfdchannels" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. RFD Channels</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top">RFD Channel</th>
<th class="tableblock halign-center valign-top">Signal</th>
<th class="tableblock halign-center valign-top">UDC Channel</th>
<th class="tableblock halign-center valign-top">RDBE IF</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">H-pol Low</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">A-0</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">A-0</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">V-pol Low</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">A-1</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">A-1</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">H-pol High</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">BCD-0</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">BCD-0</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">V-pol High</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">BCD-1</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">BCD-1</p></td>
</tr>
</tbody>
</table>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Once all RMS are nominal (typically
~<code>20</code>), look at the RDBE attenuator values. Use the same iterative
steps as above to adjust the UDC attenuators to put the RDBE
attenuators in the range <code>10</code>-<code>15</code> if possible.</p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
Increasing the sum of RFD and UDC attenuation will cause the RDBE
attenuation to decrease (and vice-versa) to reach an RMS of <code>20</code>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
It is desirable to get the RFD and UDC attenuators in the middle
of their ranges to the extent possible, consistent with the RDBE
attenuation being in the <code>10</code>-<code>15</code> dB range. The RFD and UDC attenuators
have a range of <code>0</code>-<code>31.5</code> dB (in <code>0.5</code> dB steps).
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
There are usually fixed attenuators before the RFD (or UDC, if
you don&#8217;t have an RFD) that could be changed, but that is better
avoided unless absolutely necessary.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>When finished, prepare a new procedure library with just your
updated procedure. You can use a library name of your choosing, but
make the final procedure name <code>ifdbb</code>. In the example below, the new
procedure library is <code>voattk2</code> (<code>vo</code> for the experiment type, <code>att</code>
for attenuation, and <code>k2</code> as the station two-letter code). The example
also assumes you used <code>ifdt</code> as the name of your test procedure and
that you were working with procedure library <code>vo0202k2</code> to begin with.
Please adjust the names as needed. In <em>pfmed</em>:</p>
<div class="literalblock">
<div class="content">
<pre>pfcr,voattk2
pf,voattk2
st,ifdt::vo0202k2,ifdbb
ex</pre>
</div>
</div>
</li>
<li>
<p>Consider whether to use the updated procedure locally and/or send it
to the Coordinating Center for use in future experiments. Those
actions are described in the next two sections, in that order.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_updating_the_ifdbb_procedure_in_a_schedule_locally">5. Updating the ifdbb procedure in a schedule locally</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can use a new <code>ifdbb</code> procedure in any schedules of the
appropriate type if schedule writers have not started using the new
version yet. The example below uses the names from the <a href="#_method">Method</a>
section above. All steps in this section should be executed as <em>oper</em>.</p>
</div>
<div class="paragraph">
<p>This step uses the <em>new_ifdbb</em> script. A listing of this script and a
link to a copy are provided in the appendix <a href="#_new_ifdbb_script">new_ifdbb script</a>.
This script takes three arguments:</p>
</div>
<table class="tableblock frame-none grid-none stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>procedure file</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The procedure file containing <em>just</em> the new <em>ifdbb</em> procedure.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>station name</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is the station name used in the <em>.skd</em> file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>schedule file</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <em>.skd</em> schedule file that will be updated.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For example, for the new procedure library created in the example at
in the <a href="#_method">Method</a> section above, <code>voattk2</code>, station <code>KOKEE12M</code>, and
schedule <em>vo0202.skd</em>, use the commands:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>cd /usr2/sched
new_ifdbb ../proc/voattk2.prc KOKEE12M vo0202.skd</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If your version of the FS does not have <em>new_ifdbb</em> (it was
added in version <em>10.0.0</em>), you can use a copy that has been placed in
the <em>~oper</em> directory as <em>new_ifdbb</em> and made executable with <code><strong>chmod
a+x ~/new_ifdbb</strong></code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You will then need to regenerate the SNAP procedures with <em>drudg</em>. Make
sure the procedure file is not open in the FS, or that the FS is not
running, then execute:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>cd /usr2/sched
drudg vo0202.skd</pre>
</div>
</div>
<div class="paragraph">
<p>In response to the prompts:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Enter your station code (<code>K2</code> for our example).</p>
</li>
<li>
<p>Select option <code>12</code> to generate the procedures.</p>
</li>
<li>
<p>Answer <code>y</code> if requested to confirm purging the existing procedure file.`</p>
</li>
<li>
<p>Enter <code>0</code> to exit <code>drudg</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>You can verify that the correct values have been inserted by opening
the procedure library in the FS and using <code>ifdbb</code> to set the IFs up
and <code>rdbe_atten=</code> to adjust the RDBE levels. You should get
results that match your changes, presumably with RMSs around <code>20</code> with
the RDBE attenuators in the range <code>10</code>-<code>15</code> dB.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
You can also check that the change in the <code>.skd</code> file using the
<code>diff</code> command, as described in the appendix
<a href="#_example_diff_output_comparing_schedule_files">Example diff output comparing schedule files</a> below.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_sending_an_updated_ifdbb_for_use_by_schedule_writers">6. Sending an updated ifdbb for use by schedule writers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For long term changes, you can send a library with a new <code>ifdbb</code>
procedure (<code>/usr2/proc/voattk2.prc</code> for the example in the <a href="#_method">Method</a>
section above) as a file attachment to the IVS Coordinating Center for
use in future schedules. Please include the experiment type(s)/mode(s)
it is to be used for in your message.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_example_ifdbb_procedure">Appendix A: Example ifdbb procedure</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following is a listing of the <code>ifdbb</code> procedure that was developed
for KPGO 12m for <code>vo</code> and <code>v2</code> experiments, using this procedure.
This will not be the right procedure in every detail for other stations
or observing modes. It is just offered as an example.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>lo=
lo=loa0,2472.4,usb,lcp,5
lo=loa1,2472.4,usb,rcp,5
lo=lob0,4712.4,usb,lcp,5
lo=lob1,4712.4,usb,rcp,5
lo=loc0,5832.4,usb,lcp,5
lo=loc1,5832.4,usb,rcp,5
lo=lod0,9672.4,usb,lcp,5
lo=lod1,9672.4,usb,rcp,5
"
sy=popen 's_client -h udca -c udc_lo=2472.4 2&gt;&amp;1' -n udcca
sy=popen 's_client -h udcb -c udc_lo=4712.4 2&gt;&amp;1' -n udccb
sy=popen 's_client -h udcc -c udc_lo=5832.4 2&gt;&amp;1' -n udccc
sy=popen 's_client -h udcd -c udc_lo=9672.4 2&gt;&amp;1' -n udccd
"
sy=popen 's_client -h udca -c udc_atten=0:17 2&gt;&amp;1' -n udcca
sy=popen 's_client -h udcb -c udc_atten=0:25 2&gt;&amp;1' -n udccb
sy=popen 's_client -h udcc -c udc_atten=0:30 2&gt;&amp;1' -n udccc
sy=popen 's_client -h udcd -c udc_atten=0:5 2&gt;&amp;1' -n udccd
sy=popen 's_client -h udca -c udc_atten=1:17 2&gt;&amp;1' -n udcca
sy=popen 's_client -h udcb -c udc_atten=1:27 2&gt;&amp;1' -n udccb
sy=popen 's_client -h udcc -c udc_atten=1:27 2&gt;&amp;1' -n udccc
sy=popen 's_client -h udcd -c udc_atten=1:5 2&gt;&amp;1' -n udccd
"
sy=popen 's_client -h rfd -c rfd_atten=0:3 2&gt;&amp;1' -n rfdcn
sy=popen 's_client -h rfd -c rfd_atten=1:3 2&gt;&amp;1' -n rfdcn
sy=popen 's_client -h rfd -c rfd_atten=2:9 2&gt;&amp;1' -n rfdcn
sy=popen 's_client -h rfd -c rfd_atten=3:9 2&gt;&amp;1' -n rfdcn</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_example_rdbe_atten_output">Appendix B: Example rdbe_atten= output</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following is an example log display output for the <code>rdbe_atten=</code>
command (as invoked by the SNAP <code>auto</code> procedure, which is used four
times) from the KPGO 12m using the example <code>ifdbb</code> procedure in the
appendix <a href="#_example_ifdbb_procedure">Example ifdbb procedure</a>.</p>
</div>
<div class="paragraph">
<p>There are three things to notice here:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The attenuator settings are all approximately in the <code>10</code>-<code>15</code> dB
range.</p>
</li>
<li>
<p>The RMSs are all about <code>20</code>.</p>
</li>
<li>
<p>There is some time variation in the attenuator and RMS values. This
is normal. Large time varying RFI may significantly increase the
variation.</p>
</li>
</ol>
</div>
<div class="literalblock">
<div class="content">
<pre>19:01:59;auto
19:02:00/rdbe_attenb/,,, 0,13.5,18.9, 1,14.5,19.7
19:02:00/rdbe_attena/,,, 0,12.5,19.8, 1,14.5,19.7
19:02:00/rdbe_attenc/,,, 0,15.5,19.6, 1,13.5,20.6
19:02:00/rdbe_attend/,,, 0,14.0,19.3, 1,13.0,20.6
19:02:01;auto
19:02:01/rdbe_attend/,,, 0,14.0,20.0, 1,13.0,20.2
19:02:01/rdbe_attenb/,,, 0,13.0,20.3, 1,14.5,19.4
19:02:01/rdbe_attena/,,, 0,12.5,20.5, 1,14.0,21.0
19:02:01/rdbe_attenc/,,, 0,15.5,19.9, 1,13.5,20.0
19:02:02;auto
19:02:03/rdbe_attenc/,,, 0,15.5,19.5, 1,13.5,19.4
19:02:03/rdbe_attenb/,,, 0,13.0,20.1, 1,14.0,19.7
19:02:03/rdbe_attena/,,, 0,13.0,19.4, 1,14.5,19.8
19:02:03/rdbe_attend/,,, 0,14.0,19.8, 1,13.0,19.9
19:02:03;auto
19:02:04/rdbe_attenb/,,, 0,12.5,20.8, 1,14.5,19.7
19:02:04/rdbe_attenc/,,, 0,15.0,20.2, 1,13.5,20.6
19:02:04/rdbe_attena/,,, 0,12.5,19.8, 1,14.5,19.4
19:02:04/rdbe_attend/,,, 0,13.5,20.6, 1,13.0,20.4</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_new_ifdbb_script">Appendix C: new_ifdbb script</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A copy of this script can be found in the file <em>new_ifdbb</em> at:
<a href="https://github.com/nvi-inc/rdbe_att" class="bare">https://github.com/nvi-inc/rdbe_att</a> and a listing is provided below.
Please be aware that the FS may have an updated version in the file
<em>new_ifdbb/new_ifdbb</em> at: <a href="https://github.com/nvi-inc/fs" class="bare">https://github.com/nvi-inc/fs</a>.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>#!/usr/bin/perl
#
# Copyright (c) 2020-2021 NVI, Inc.
#
# This file is part of VLBI Field System
# (see http://github.com/nvi-inc/fs).
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program. If not, see &lt;http://www.gnu.org/licenses/&gt;.
#


if ($#ARGV &lt; 0) {
    print
"Usage: $0 new station files

Insert content of file 'new' for the 'ifdbb' procedure of 'station' in 'files'.

 - Version 1.03
 - The 'files' should be '.skd' schedules for broadband observations that
   contain a section for 'station' in the '\$PROCS' block.
 - File 'new' must start with a 'define  ifdbb ' line and end with an 'enddef'
   line
 - A line that is known to be correct in all details is always used in place
   of the first line in 'new'.
 - A progress report is printed during processing. It may be useful for
   troubleshooting, e.g., 'station' (which is case sensitive) being misspelled.
 - DOS/Windows line endings in 'new' and the input 'files' will be converted to
   UNIX line endings while being copied to the output 'files'.
 - The original input 'files' are renamed with a '.bak' extension as a backup.
   The are used to automatically recover from some errors and can be used
   manually recover from any others.
 - Even if the content is the same, what is in 'new' will replace an old
   'ifdbb' procedure. If no errors were reported in the processing, you can
   check for this by using 'diff' to compare the output version to the '.bak'
   version, no change will be visible.
";
    exit -1;
}

$new = shift or die "Try $0 for help\n";
open(NEW,$new) || die "Can't open $new\n";

$station = shift or die "Try $0 for help\n";

FILE: foreach $name (@ARGV) {
    print "Processing $name\n";
    seek NEW, 0, SEEK_SET or die "Cannot rewind $new: $!";
    $bak = $name . ".bak";
    $out = $name;
    if (!-e $name) {
        die "Can't find $name Quitting.\n";
    }

# rename the original if we can and open the files

    if (-e $bak) {
        die "Backup-file $bak already exists, giving up.\n";
    }

    rename ($out,$bak) ||die "renaming $out to $bak failed: $!, giving up.\n";

    if(!open(BAK,$bak)) {
        print "Failed to open $bak: $!\n";
        if(!rename($bak,$out)) {
            print "Unable to rename $bak to $out: $!\n";
            die "Please fix whatever the problem is and rename it yourself.\n";
        } else {
            die "I renamed $bak to $out for you.\n";
        }
    }

    if(!open(OUT,"&gt;" . $out)) {
        print "Failed to open $out: $!\n";
        if((!close(BAK)) || (!rename($bak,$out))) {
            print "Unable to rename $bak to $out: $!\n";
            die "Please fix whatever the problem is and rename it yourself.\n";
        } else {
          die "I renamed $bak to $out for you.\n";
        }
    }

#process

    $line=0;
    $change=0;
    $procs_found=0;
    $station_found=0;
    $ifdbb_found=0;
    $enddef_found=0;

    while(&lt;BAK&gt;) {
        s/\r//;
        $line++;
        if (!$procs_found) {
            if(/^\$PROCS$/) {
                print "Found \$PROCS\n";
                $procs_found=1;
            }
            print OUT;
            next;
        }
        if(!$station_found) {
            if(/^BEGIN +(\w+) *$/) {
                print "Found $1\n";
                if ($1 eq $station) {
                    $station_found = 1;
                }
            }
            print OUT;
            next;
        }
        if(!$ifdbb_found) {
            if(/^END /) {
                last;
            } elsif(/^define  ifdbb /) {
                print "Found old ifdbb\n";
                $ifdbb_found = 1;
                $new_lines=0;
                $enddef_line=0;
                $newdef_found=0;
                while(&lt;NEW&gt;) {
                    s/\r//;
                    $new_lines++;
                    if(/^define  ifdbb / &amp;&amp; $new_lines == 1) {
                        $_ = "define  ifdbb         00000000000x\n";
                        $newdef_found=1;
                    } elsif(/^enddef$/) {
                        $enddef_line=$new_lines;
                    }
                    print OUT;
                }
                if(!$newdef_found || $enddef_line != $new_lines) {
                    last;
                }
                print "New ifdbb inserted\n";
                $change=1;
                while(&lt;BAK&gt;) {
                    s/\r//;
                    if (/^enddef/) {
                        $enddef_found=1;
                        last;
                    } else {
                        next;
                    }
                }
                next;
            } else {
                print OUT;
                next;
            }
        }
        print OUT;
    }
    $rename=1;
    if(!$procs_found) {
        print "Warning: $PROCS not found in $name.\n";
    } elsif(!$station_found) {
        print "Warning: $station procedures not found in $name.\n";
    } elsif(!$ifdbb_found) {
        print "Warning: ifdbb procedure for $station not found in $name.\n";
    } elsif(!$newdef_found || $enddef_line != $new_lines) {
        print "Warning: contents of $new malformed.\n";
    } elsif(!$enddef_found) {
        print "Warning: No enddef for original ifdbb procedure was found.\n";
    } else {
        $rename=0;
    }
    if(!close(OUT)) {
        $rename=1;
    print "Warning: Unable to close to $out: $!\n";
    }
    if(!close(BAK)) {
        $rename=1;
    print "Warning: Unable to close to $bak: $!\n";
    }

    if($rename || $change == 0) {
        if(!rename($bak,$out)) {
            print "Warning: Unable to rename '$bak' to '$out': $!\n";
            if($rename) {
                print "Warning: Please fix whatever the problem is and rename it yourself,\n";
                print "Warning: probably using 'mv $bak $out'\n";
            } else {
                print "Warning: It appears that $out did not need any changes,\n";
                print "Warning: but to be safe you should probably \"";
                print "Warning: use 'mv $bak $out'\n";
            }
        } elsif($rename) {
            print "Warning: I renamed '$bak' to '$out' for you.\n";

        }
    }
}</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_example_diff_output_comparing_schedule_files">Appendix D: Example diff output comparing schedule files</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can use the <em>diff</em> command to compare the result of <em>new_ifdbb</em>
script to the original schedule. Working with the examples in this
document, the following commands can be used:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>cd /usr2/sched
diff vo0202.skd vo0202.skd.bak</pre>
</div>
</div>
<div class="paragraph">
<p>In the following output generated from these commands, please note that:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Only lines that changed are shown.</p>
</li>
<li>
<p>Lines from the updated schedule (the first file in the <em>diff</em>
command) are preceded by <code>&lt;</code>; lines from the old schedule (second
file), <code>&gt;</code>.</p>
</li>
<li>
<p>Except for the <code>define</code> line (which may or not have changed),
only lines that set attenuators have changed. In particular, no lines
that refer to LO settings are shown as changed. Some attenuator
setting lines may not be shown if they didn&#8217;t change.</p>
</li>
<li>
<p>The station for which the change was made is not visible. However,
if you used your station name with <em>new_ifdbb</em>, the change was for
your station. You can also verify that you have updated the procedure
for your station by testing the new <code>ifdbb</code> procedure as described at
the end of the <a href="#_updating_the_ifdbb_procedure_in_a_schedule_locally">Updating the ifdbb procedure in a schedule locally</a>
section above. Alternatively, you can list it from a newly generated
procedure library (<em>vo0202k2.prc</em> for the example) in <em>pfmed</em> (use the
<code>li</code> command) to see if you get the updated version. The method for
regenerating the library is also described in the same section above.</p>
</li>
</ol>
</div>
<div class="literalblock">
<div class="content">
<pre>2352c2352
&lt; define  ifdbb         00000000000x
---
&gt; define  ifdbb         16034205923x
2368,2375c2368,2375
&lt; sy=popen 's_client -h udca -c udc_atten=0:17 2&gt;&amp;1' -n udcca
&lt; sy=popen 's_client -h udcb -c udc_atten=0:25 2&gt;&amp;1' -n udccb
&lt; sy=popen 's_client -h udcc -c udc_atten=0:30 2&gt;&amp;1' -n udccc
&lt; sy=popen 's_client -h udcd -c udc_atten=0:5 2&gt;&amp;1' -n udccd
&lt; sy=popen 's_client -h udca -c udc_atten=1:17 2&gt;&amp;1' -n udcca
&lt; sy=popen 's_client -h udcb -c udc_atten=1:27 2&gt;&amp;1' -n udccb
&lt; sy=popen 's_client -h udcc -c udc_atten=1:27 2&gt;&amp;1' -n udccc
&lt; sy=popen 's_client -h udcd -c udc_atten=1:5 2&gt;&amp;1' -n udccd
---
&gt; sy=popen 's_client -h udca -c udc_atten=0:20 2&gt;&amp;1' -n udcca
&gt; sy=popen 's_client -h udcb -c udc_atten=0:20 2&gt;&amp;1' -n udccb
&gt; sy=popen 's_client -h udcc -c udc_atten=0:20 2&gt;&amp;1' -n udccc
&gt; sy=popen 's_client -h udcd -c udc_atten=0:20 2&gt;&amp;1' -n udccd
&gt; sy=popen 's_client -h udca -c udc_atten=1:20 2&gt;&amp;1' -n udcca
&gt; sy=popen 's_client -h udcb -c udc_atten=1:20 2&gt;&amp;1' -n udccb
&gt; sy=popen 's_client -h udcc -c udc_atten=1:20 2&gt;&amp;1' -n udccc
&gt; sy=popen 's_client -h udcd -c udc_atten=1:20 2&gt;&amp;1' -n udccd
2379,2380c2379,2380
&lt; sy=popen 's_client -h rfd -c rfd_atten=2:9 2&gt;&amp;1' -n rfdcn
&lt; sy=popen 's_client -h rfd -c rfd_atten=3:9 2&gt;&amp;1' -n rfdcn
---
&gt; sy=popen 's_client -h rfd -c rfd_atten=2:10 2&gt;&amp;1' -n rfdcn
&gt; sy=popen 's_client -h rfd -c rfd_atten=3:10 2&gt;&amp;1' -n rfdcn</pre>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2021-10-01 11:29:54 -0400
</div>
</div>
</body>
</html>